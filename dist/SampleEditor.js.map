{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2fdcd36cbc9448481b6d","webpack:///./src/CanvasUI.js","webpack:///./src/index.js","webpack:///./src/SampleEditor.js","webpack:///./src/props.js","webpack:///./src/eventMixin.js","webpack:///./src/Waveform.js","webpack:///./src/Ruler.js","webpack:///./src/LineMarker.js","webpack:///./src/LoopMarker.js"],"names":["defaultProperties","width","height","hZoom","visible","duration","color","background","buffer","CanvasUI","defaults","props","$on","dirty","canvas","document","createElement","ctx","getContext","imageSmoothingEnabled","clear","render","undefined","SampleEditor","vZoom","offset","channel","resolution","startPosition","uiZoomStickiness","loop","loopStart","loopEnd","selectStart","selectEnd","quantize","waveForm","ruler","startMarker","zoomMarker","loopLengthMarker","loopStartMarker","loopEndMarker","dir","$link","$map","v","bind","_setupUI","renderIfDirty","$observe","classList","add","drawImage","position","_timeToPixel","time","px","displayDuration","Math","round","pixel","x1","y1","x2","y2","point","y","loopRect","_getLoopRect","abs","x","hitTarget","e","style","cursor","altKey","mouseDown","lastY","zoomThresh","canvasTarget","doZoom","lastMousePos","startXTime","toRelativeMovement","rect","getBoundingClientRect","pixelRatio","pageX","left","pageY","top","movementX","movementY","quantizePosition","offsetPx","pxQuant","addEventListener","pos","_hitTest","_updateCursor","requestPointerLock","_pixelToTime","exitPointerLock","p","max","min","updateStartPos","deltaX","deltaY","xTime","deltaTime","Object","assign","zoomDelta","zoomPerc","posRatio","updateSelection","updateLoopPos","start","end","d","startPos","Props","filter","propsObject","reduce","a","keys","forEach","defineProperty","k","get","set","oldV","$triggerDeferedChange","$trigger","$changeBatchTimer","$privateProps","$keys","setTimeout","key","cb","Array","isArray","Error","call","$unobserve","$off","length","otherProps","map","$bind","$unbind","prototype","name","callback","context","_events","events","push","ctxArg","i","len","listener","retain","eventListeners","args","binding","listeners","splice","arguments","apply","selectColor","selectBackground","avarage","data","from","to","interval","q","tot","avg","Waveform","w","h","fillStyle","fillRect","getChannelData","displayLength","pointsToDraw","bufferStepLen","pointDistance","halfHeight","offsetSamples","sampleRate","drawSymetric","beginPath","moveTo","lineTo","stroke","draw","lastDataIndex","pointsDrawn","j","floor","fill","strokeStyle","timePerPoint","relStartTime","startPoint","relEndtTime","endPoint","unit","Ruler","lineWidth","secondsPerPixel","quantizeRuler","precision","pixelsPerInterval","drawPoints","markerInterval","startTime","isMarker","fontSize","font","fillText","toFixed","MAX_PIXEL_W","MIN_PIXEL_W","pixelsPerSecond","r","oct","log","dec","pow","c","LineMarker","triH","triH2","strokeRect","LoopMarker"],"mappings":"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","file":"SampleEditor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"SampleEditor\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SampleEditor\"] = factory();\n\telse\n\t\troot[\"SampleEditor\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2fdcd36cbc9448481b6d","/**\n* Base class for all ui\n* @Author: Rikard Lindstrom <hi@rikard.io>\n* @Filename: CanvasUI.js\n*/\n\nimport Props from './props';\n\nconst defaultProperties = {\n  width: 640,\n  height: 320,\n  hZoom: 1,\n  visible: true,\n  duration: 'auto',\n  color: '#fff',\n  background: '#333',\n  buffer: null\n};\n\nclass CanvasUI {\n\n  constructor(defaults, props) {\n    this.props = new Props(defaultProperties, defaults, props);\n    this.props.$on('change', _ => { this.dirty = true; });\n    this.dirty = true;\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.imageSmoothingEnabled = false;\n  }\n\n  renderIfDirty() {\n    if (!this.dirty) return this;\n    this.clear();\n    if (!this.props.visible) return this;\n    return this.render();\n  }\n\n  clear() {\n    // clear canvas and update width / height\n    this.canvas.width = this.props.width;\n    this.canvas.height = this.props.height;\n  }\n\n  get duration() {\n    return this.props.duration === 'auto' ? (this.props.buffer ? this.props.buffer.duration : 0) : this.props.duration;\n  }\n\n  get displayDuration() {\n    return this.duration / this.props.hZoom;\n  }\n}\n\nexport default CanvasUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/CanvasUI.js","/**\n * @Author: Rikard Lindstrom <hi@rikard.io>\n * @Filename: index.js\n */\n\n'use strict';\nimport SampleEditor from './SampleEditor';\n\n// expose on window\nif (this !== undefined) {\n  this.SampleEditor = SampleEditor;\n}\nexport default SampleEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * Main program, compiles everything onto one canvas and handles interaction\n * @Author: Rikard Lindstrom <hi@rikard.io>\n * @Filename: SampleEditor.js\n */\n\nimport CanvasUI from './CanvasUI';\nimport Waveform from './Waveform';\nimport Ruler from './Ruler';\nimport LineMarker from './LineMarker';\nimport LoopMarker from './LoopMarker';\n\nconst defaultProperties = {\n  hZoom: 1,\n  vZoom: 2,\n  offset: 0,\n  background: '#ddd',\n  color: '#222',\n  width: 640,\n  height: 320,\n  channel: 0,\n  resolution: 1,\n  startPosition: 42.1,\n  uiZoomStickiness: 0.1,\n  duration: 'auto',\n  visible: true,\n  loop: true,\n  loopStart: 0,\n  loopEnd: 1,\n  selectStart: 0,\n  selectEnd: 0,\n  quantize: 0.0125,\n  buffer: null\n\n};\n\nclass SampleEditor extends CanvasUI {\n\n  constructor(props) {\n\n    super(defaultProperties, props);\n\n    this.waveForm = new Waveform({});\n    this.ruler = new Ruler({});\n    this.startMarker = new LineMarker({});\n    this.zoomMarker = new LineMarker({visible: false});\n    this.loopLengthMarker = new LoopMarker({visible: true});\n    this.loopStartMarker = new LineMarker({visible: true});\n    this.loopEndMarker = new LineMarker({dir: -1, visible: true});\n\n    this.waveForm.props.$link(this.props);\n    this.ruler.props.$link(this.props, ['hZoom', 'width', 'offset', 'quantize',\n      'buffer' ]).$map(this.props, { height: v => v / 16 });\n    this.zoomMarker.props.$link(this.props, ['height']);\n    this.loopEndMarker.props.$link(this.props, ['height'])\n      .$map(this.props, { width: v => v / 64 });\n    this.loopStartMarker.props.$link(this.props, ['height'])\n      .$map(this.props, { width: v => v / 64 });\n    this.loopLengthMarker.props.$map(this.props, {\n      height: v => v / 32\n    });\n\n    this.startMarker.props.$link(this.props, ['height'])\n      .$map(this.props, { width: v => v / 64 });\n\n    this.render = this.render.bind(this);\n\n    this._setupUI();\n\n    this.props.$on('defered_change', this.renderIfDirty, this);\n\n    this.zoomMarker.props.$observe('visible', this.renderIfDirty, this);\n\n    this.canvas.classList.add('SampleEditor');\n  }\n\n  render() {\n    let ctx = this.ctx;\n\n    ctx.drawImage(this.waveForm.renderIfDirty().canvas, 0, 0);\n    ctx.drawImage(this.zoomMarker.renderIfDirty().canvas,\n      this.zoomMarker.position, 0);\n\n    ctx.drawImage(this.ruler.renderIfDirty().canvas, 0, 0);\n\n    ctx.drawImage(this.startMarker.renderIfDirty().canvas,\n      this._timeToPixel(this.props.startPosition), 10);\n\n    this.loopLengthMarker.props.width = this._timeToPixel(this.props.loopEnd) -\n      this._timeToPixel(this.props.loopStart);\n\n    ctx.drawImage(this.loopLengthMarker.renderIfDirty().canvas,\n      this._timeToPixel(this.props.loopStart), 20);\n    ctx.drawImage(this.loopStartMarker.renderIfDirty().canvas,\n      this._timeToPixel(this.props.loopStart), 20);\n    ctx.drawImage(this.loopEndMarker.renderIfDirty().canvas,\n      this._timeToPixel(this.props.loopEnd) - this.loopEndMarker.props.width, 20);\n\n  }\n\n  _timeToPixel(time) {\n    time -= this.props.offset;\n    let px = (time / this.displayDuration) * this.props.width;\n\n    return Math.round(px);\n  }\n\n  _pixelToTime(pixel) {\n    return (pixel / this.props.width) * this.displayDuration;\n  }\n\n  _getLoopRect() {\n    return {\n      x1: this._timeToPixel(this.props.loopStart),\n      y1: 20,\n      x2: this._timeToPixel(this.props.loopEnd),\n      y2: this.props.height - 20\n    };\n  }\n\n  // a pretty crude hittest to find target from a relative mouse position\n  _hitTest(point) {\n\n    if (point.y < this.ruler.props.height) {\n\n      if (this.props.loop) {\n        let loopRect = this._getLoopRect();\n\n        if (point.y >= loopRect.y1 && point.y < loopRect.y2) {\n          if (Math.abs(point.x - loopRect.x1) < 5) {\n            return this.loopStartMarker;\n          } else if (Math.abs(point.x - loopRect.x2) < 5) {\n            return this.loopEndMarker;\n          } else if (point.x >= loopRect.x1 && point.x < loopRect.x2) {\n            return this.loopLengthMarker;\n          }\n        }\n      }\n\n      if (point.x) {return this.ruler;}\n    }\n    return this.waveForm;\n  }\n\n  // update mouse cursor to reflect active target\n  _updateCursor(hitTarget, e) {\n    if (hitTarget === this.ruler) {\n      this.canvas.style.cursor = 'pointer';\n    } else if (hitTarget === this.loopStartMarker) {\n      this.canvas.style.cursor = 'e-resize';\n    } else if (hitTarget === this.loopEndMarker) {\n      this.canvas.style.cursor = 'w-resize';\n    } else if (hitTarget === this.loopLengthMarker) {\n      this.canvas.style.cursor = 'move';\n    } else if (hitTarget === this.waveForm && e.altKey) {\n      this.canvas.style.cursor = 'zoom-in';\n    } else {\n      this.canvas.style.cursor = 'auto';\n    }\n  }\n\n  // almost fully self contained ui interaction\n  _setupUI() {\n    let mouseDown = false;\n    let lastY = 0;\n    let zoomThresh = 0;\n    let canvasTarget = null;\n    let doZoom = false;\n    let lastMousePos = { x: 0, y: 0 };\n    let startXTime = 0;\n\n    const toRelativeMovement = (e) => {\n      let rect = this.canvas.getBoundingClientRect();\n      let pixelRatio = this.pixelRatio;\n\n      let x = (e.pageX - rect.left) * pixelRatio.x;\n      let y = (e.pageY - rect.top) * pixelRatio.y;\n\n      let movementX = e.movementX ? e.movementX * pixelRatio.x : 0;\n      let movementY = e.movementY ? e.movementY * pixelRatio.y : 0;\n\n      return {\n        rect,\n        x,\n        y,\n        movementX,\n        movementY\n      };\n    };\n\n    const quantizePosition = ({ x, y }) => {\n\n      if (!this.props.quantize) return { x, y };\n\n      let offsetPx = (this.props.offset / this.displayDuration) * this.props.width;\n      let pxQuant = (this.props.quantize / this.displayDuration) * this.props.width;\n\n      x += offsetPx;\n      x = Math.round(x / pxQuant) * pxQuant;\n      x -= offsetPx;\n      return { x, y };\n    };\n\n    this.canvas.addEventListener('mousedown', (e)=>{\n      mouseDown = true;\n      lastY = null;\n      zoomThresh = 0;\n      doZoom = false;\n\n      let pos = toRelativeMovement(e);\n\n      canvasTarget = this._hitTest(pos);\n\n      this._updateCursor(canvasTarget, e);\n\n      if (canvasTarget === this.waveForm) {\n        if (e.altKey) {\n          doZoom = true;\n          this.zoomMarker.position = pos.x;\n          this.zoomMarker.props.visible = true;\n          this.canvas.requestPointerLock();\n        }\n      }\n      if (!doZoom) {\n        pos = quantizePosition(pos);\n      }\n      startXTime = this._pixelToTime(pos.x) + this.props.offset;\n      !doZoom && (this.props.selectEnd = this.props.selectStart = startXTime);\n      lastMousePos = pos;\n\n    });\n\n    document.addEventListener('mouseup', ()=>{\n      mouseDown = false;\n      if (doZoom) {\n        this.zoomMarker.props.visible = false;\n        document.exitPointerLock();\n        doZoom = false;\n      }\n    });\n\n    document.addEventListener('mousemove', (e)=>{\n\n      if (mouseDown) {\n\n        let { x, y, movementX, movementY, rect } = toRelativeMovement(e);\n        let p = { x, y };\n\n        if (!doZoom) {\n\n          // keep p within boarders of canvas\n          p.x = Math.max(0, Math.min(this.props.width, p.x));\n          p = quantizePosition(p);\n\n          if (canvasTarget === this.ruler) {\n            this.updateStartPos(p.x);\n          }\n\n        }\n\n        let deltaX = (doZoom && movementX !== undefined ? movementX : (p.x - lastMousePos.x)) / rect.width;\n        let deltaY = (doZoom && movementY !== undefined ? movementY : (p.y - lastMousePos.y)) / rect.height;\n\n        let xTime = this._pixelToTime(p.x) + this.props.offset;\n        let deltaTime = this._pixelToTime(deltaX) * this.props.width / this.pixelRatio.x;\n\n        Object.assign(lastMousePos, p);\n\n        if (doZoom) {\n\n          if (lastY === null) lastY = p.y;\n\n          lastY = p.y;\n\n          zoomThresh += Math.abs(deltaY);\n          let hZoom = Math.max(1, this.props.hZoom + deltaY * this.props.hZoom);\n\n          if (zoomThresh > this.props.uiZoomStickiness) {\n\n            let zoomDelta = hZoom - this.props.hZoom;\n\n            if (zoomDelta !== 0 && hZoom >= 0.5) {\n\n              let zoomPerc = zoomDelta / this.props.hZoom;\n              let posRatio = p.x / (rect.width * this.pixelRatio.x);\n\n              this.props.hZoom = hZoom;\n              this.offset += zoomPerc * posRatio * this.displayDuration;\n\n            }\n\n          }\n\n          this.offset -= (deltaX * 10) / hZoom;\n\n        } else if (canvasTarget === this.waveForm) {\n\n          if (xTime < startXTime) {\n            this.updateSelection(this.props.selectStart + deltaTime, startXTime);\n          } else {\n            this.updateSelection(startXTime, this.props.selectEnd + deltaTime);\n          }\n\n        } else if (canvasTarget === this.ruler) {\n          if (p.x >= 0 && p.x < rect.width) {\n            this.updateStartPos(p.x);\n          } else {\n            if (p.x < 0) {\n              this.offset = Math.max(0, this.props.offset - Math.abs(p.x * 0.1));\n            } else {\n              this.offset = Math.min(this.duration, this.props.offset + (p.x - rect.width) * 0.1);\n            }\n          }\n        } else if (canvasTarget === this.loopLengthMarker) {\n\n          this.updateLoopPos(this.props.loopStart + deltaTime, this.props.loopEnd + deltaTime);\n\n        } else if (canvasTarget === this.loopStartMarker) {\n\n          if (xTime <= this.props.loopEnd) {\n            this.updateLoopPos(this.props.loopStart + deltaTime, this.props.loopEnd);\n          } else {\n            this.updateLoopPos(this.props.loopEnd, this.props.loopEnd);\n          }\n\n        } else if (canvasTarget === this.loopEndMarker) {\n\n          if (xTime >= this.props.loopStart) {\n            this.updateLoopPos(this.props.loopStart, this.props.loopEnd + deltaTime);\n          } else {\n            this.updateLoopPos(this.props.loopStart, this.props.loopStart);\n          }\n\n        }\n\n      } else {\n        this._updateCursor(this._hitTest(toRelativeMovement(e)), e);\n      }\n    });\n  }\n\n  updateSelection(start, end) {\n\n    start = Math.max(0, start);\n    end = Math.min(this.duration, end);\n\n    this.props.selectStart = start;\n    this.props.selectEnd = end;\n\n  }\n\n  updateLoopPos(start, end) {\n\n    if (start < 0) {\n      let d = Math.abs(start);\n\n      end = Math.min(this.duration, end + d);\n      start += d;\n\n    }\n    if (end > this.duration) {\n      let d = this.duration - end;\n\n      start = Math.max(0, start + d);\n      end += d;\n    }\n\n    if (start > end) {\n      start = end;\n    }\n\n    if (start >= 0 && end <= this.duration) {\n      this.props.loopStart = start;\n      this.props.loopEnd = end;\n    }\n\n  }\n\n  updateStartPos(px) {\n    let startPos = ((px / this.canvas.width) * this.duration / this.props.hZoom) + this.props.offset;\n\n    this.props.startPosition = startPos;\n  }\n\n  get offset() {\n    return this.props.offset;\n  }\n\n  set offset(v) {\n    this.props.offset = Math.max(0, Math.min(this.duration - this.displayDuration, v));\n  }\n\n  get buffer() {\n    return this.props.buffer;\n  }\n\n  set buffer(buffer) {\n    this.props.buffer = buffer;\n  }\n\n  get pixelRatio() {\n\n    let rect = this.canvas.getBoundingClientRect();\n    let pixelRatio = { x: this.props.width / rect.width, y: this.props.height / rect.height };\n\n    return pixelRatio;\n\n  }\n}\n\nexport default SampleEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/SampleEditor.js","/**\n * \"Magic\" Properties with bindings to react to changes\n * @Author: Rikard Lindstrom <hi@rikard.io>\n * @Filename: Props.js\n */\n\nimport eventMixin from './eventMixin';\n\nclass Props {\n\n  constructor(...props) {\n\n    props = props.filter(p => !!p);\n\n    let propsObject = props.reduce((a, p) => { return Object.assign(a, p); }, {});\n\n    Object.keys(propsObject).forEach(k => {\n      Object.defineProperty(this, k, {\n        get() {\n          return propsObject[ k ];\n        },\n        set(v) {\n          let oldV = propsObject[ k ];\n\n          propsObject[ k ] = v;\n          this.$triggerDeferedChange();\n          this.$trigger('change', k, v);\n          this.$trigger(`change:${k}`, v, oldV);\n        }\n      });\n    });\n    this.$changeBatchTimer = null;\n    this.$privateProps = propsObject;\n    this.$keys = Object.keys(propsObject);\n  }\n\n  $triggerDeferedChange() {\n  // change is triggered on the next heartbeat to avoid mass triggering\n  // when changing multiple props at once\n    if (this.$changeBatchTimer === null) {\n      this.$changeBatchTimer = setTimeout(()=>{\n        this.$trigger('defered_change');\n        this.$changeBatchTimer = null;\n      }, 50);\n    }\n  }\n\n  $observe(key, cb, ctx = this) {\n    if (Array.isArray(key)) {\n      key.forEach(k => this.$observe(k, cb, ctx));\n      return this;\n    }\n    if (this.$privateProps[ key ] === undefined) throw new Error('Can\\' observe undefined prop ' + key);\n    cb.call(ctx, this.$privateProps[ key ]);\n    this.$on(`change:${key}`, cb, ctx);\n    return this;\n  }\n\n  $unobserve(key, cb, ctx) {\n    if (Array.isArray(key)) {\n      key.forEach(k => this.$unobserve(k, cb, ctx));\n      return this;\n    }\n    this.$off(`change:${key}`, cb, ctx);\n    return this;\n  }\n\n  $bind(ctx, ...keys) {\n    keys.forEach(k => {\n      this.$observe(k, function (v) {\n        ctx[ k ] = v;\n      });\n    });\n\n    return this;\n\n  }\n\n  $unbind(ctx, ...keys) {\n    if (keys && keys.length) {\n      keys.forEach(k => { this.$unobserve(k, null, ctx); });\n    } else {\n      this.$off(null, null, ctx);\n    }\n\n    return this;\n\n  }\n\n  $map(otherProps, map) {\n    Object.keys(map).forEach(k => {\n      otherProps.$observe(k, v => {\n        this[ k ] = map[ k ](v);\n      });\n    });\n\n    return this;\n\n  }\n\n  $link(otherProps, keys = null) {\n    keys = keys || Object.keys(this.$privateProps).filter(k => otherProps.$privateProps[ k ] !== undefined);\n    otherProps.$bind(this, ...keys);\n    return this;\n  }\n\n  $unlink(otherProps, keys = null) {\n    keys = keys || Object.keys(this.$privateProps).filter(k => otherProps.$privateProps[ k ] !== undefined);\n    otherProps.$unbind(this, ...Object.keys(this.$privateProps));\n    return this;\n  }\n}\n\nObject.assign(Props.prototype, eventMixin);\n\nexport default Props;\n\n\n\n// WEBPACK FOOTER //\n// ./src/props.js","/**\n*   Simple event $triggering and listening mixin, somewhat borrowed from Backbone\n*   @author Rikard Lindstrom\n*   @mixin\n*/\n'use strict';\n\nexport default {\n\n  /**\n  *   Register a listener\n  */\n  $on: function (name, callback, context) {\n  /** @member */\n    this._events = this._events || {};\n\n    let events = this._events[ name ] || (this._events[ name ] = []);\n\n    events.push({\n      callback: callback,\n      ctxArg: context,\n      context: context || this\n    });\n\n    return this;\n  },\n\n  /**\n  *   Unregister a listener\n  */\n  $off: function (name, callback, context) {\n    let i, len, listener, retain;\n\n    if (!this._events || !this._events[ name ]) {\n      return this;\n    }\n\n    if (!name && !callback && !context) {\n      this._events = {};\n    }\n\n    let eventListeners = this._events[ name ];\n\n    if (eventListeners) {\n      retain = [];\n      // silly redundancy optimization, might be better to keep it DRY\n      if (callback && context) {\n        for (i = 0, len = eventListeners.length; i < len; i++) {\n          listener = eventListeners[ i ];\n          if (callback !== listener.callback && context !== listener.ctxArg) {\n            retain.push(eventListeners[ i ]);\n          }\n        }\n      } else if (callback) {\n        for (i = 0, len = eventListeners.length; i < len; i++) {\n          listener = eventListeners[ i ];\n          if (callback !== listener.callback) {\n            retain.push(eventListeners[ i ]);\n          }\n        }\n      } else if (context) {\n        for (i = 0, len = eventListeners.length; i < len; i++) {\n          listener = eventListeners[ i ];\n          if (context !== listener.ctxArg) {\n            retain.push(eventListeners[ i ]);\n          }\n        }\n      }\n\n      this._events[ name ] = retain;\n    } else if (context || callback) {\n      Object.keys(this._events).forEach((k) => {\n        this.$off(k, callback, context);\n      });\n    }\n\n    if (!this._events[ name ].length) {\n      delete this._events[ name ];\n    }\n\n    return this;\n  },\n\n  /**\n  *   $trigger an event\n  */\n  $trigger: function (name) {\n    if (!this._events || !this._events[ name ]) {\n      return this;\n    }\n\n    let i, args, binding, listeners;\n\n    listeners = this._events[ name ];\n\n    args = [].splice.call(arguments, 1);\n    for (i = listeners.length - 1; i >= 0; i--) {\n      binding = listeners[ i ];\n      binding.callback.apply(binding.context, args);\n    }\n\n    return this;\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/eventMixin.js","/**\n * @Author: Rikard Lindstrom <hi@rikard.io>\n * @Filename: Waveform.js\n */\n\nimport CanvasUI from './CanvasUI';\n\nconst defaultProperties = {\n  vZoom: 1,\n  offset: 0,\n  background: '#ddd',\n  color: '#222',\n  selectColor: '#ddd',\n  selectBackground: '#222',\n  width: 640,\n  height: 320,\n  selectStart: 0,\n  selectEnd: 0,\n  channel: 0,\n  resolution: 1\n};\n\nfunction avarage(data, from, to, interval = 1, abs = false, q) {\n\n  interval = Math.max(1, interval);\n  to = Math.min(data.length, to);\n  to = Math.min(from + 100, to);\n\n  let tot = 0;\n\n  for (let i = from; i < to; i += interval) {\n    tot += abs ? Math.abs(data[ i ]) : data[ i ];\n\n  }\n  let len = to - from;\n  let avg = (tot / len) * interval;\n\n  return avg;\n\n}\n\nclass Waveform extends CanvasUI {\n\n  constructor(props) {\n\n    super(defaultProperties, props);\n\n  }\n\n  render() {\n\n    let buffer = this.props.buffer;\n\n    if (!buffer) return this;\n\n    let w = this.props.width;\n    let h = this.props.height;\n\n    let ctx = this.ctx;\n\n    ctx.fillStyle = this.props.background;\n    ctx.fillRect(0, 0, w, h);\n\n    let data = buffer.getChannelData(this.props.channel);\n    let displayLength = data.length / this.props.hZoom;\n    let pointsToDraw = Math.min(w / this.props.resolution, displayLength);\n    let bufferStepLen = displayLength / pointsToDraw ;\n    let pointDistance = w / pointsToDraw ;\n\n    let halfHeight = h / 2;\n\n    let offsetSamples = this.props.offset * buffer.sampleRate;\n\n    ctx.fillStyle = this.props.color;\n\n    let drawSymetric = bufferStepLen > pointDistance;\n\n    ctx.beginPath();\n    ctx.moveTo(0, halfHeight);\n    ctx.lineTo(w, halfHeight);\n    ctx.stroke();\n\n    ctx.moveTo(0, halfHeight);\n\n    // internal render function to be able to divide the rendering on selection\n    let draw = (from, to, color, background) => {\n\n      from = Math.max(0, Math.min(from, pointsToDraw));\n      to = Math.max(0, Math.min(to, pointsToDraw));\n\n      let lastDataIndex = 0;\n      let pointsDrawn = [];\n\n      ctx.beginPath();\n\n      let x = from * pointDistance;\n\n      if (background) {\n        let len = (to - from) * pointDistance;\n\n        ctx.fillStyle = background;\n        ctx.fillRect(x, 0, len, h);\n      }\n\n      for (let i = from; i < to; i++) {\n\n        let j = Math.floor((i + 1) * bufferStepLen + offsetSamples);\n\n        if (drawSymetric) {\n          // avarage with abs\n          let v = j >= 0 ? avarage(data, lastDataIndex, j, 1, true) : 0;\n\n          if (v >= 0) {\n            let y = v * this.props.vZoom * halfHeight;\n\n            if (i === from) {\n              ctx.moveTo(x, halfHeight - y);\n            }\n            ctx.lineTo(x, halfHeight - y);\n            pointsDrawn.push(x, y);\n          }\n\n        } else {\n          // avarage without abs\n          let v = j >= 0 ? avarage(data, lastDataIndex, j, 1, false) : 0;\n          let y = v * this.props.vZoom * halfHeight;\n\n          if (i === from) {\n            ctx.moveTo(0, halfHeight - y);\n          }\n          ctx.lineTo(x, halfHeight - y);\n\n        }\n\n        x += pointDistance;\n\n        lastDataIndex = j;\n      }\n\n      // fill in the flip side if we should do a symetrical waveform\n      if (drawSymetric) {\n        for (let i = pointsDrawn.length - 1; i > 0; i -= 2) {\n          let x = pointsDrawn[ i - 1 ];\n          let y = pointsDrawn[ i ];\n\n          ctx.lineTo(x, halfHeight + y);\n        }\n\n        ctx.fillStyle = color;\n        ctx.fill();\n\n      } else {\n        ctx.strokeStyle = color;\n        ctx.stroke();\n      }\n\n    };\n\n    if (this.props.selectStart !== this.props.selectEnd) {\n      let timePerPoint = (this.duration / this.props.hZoom) / pointsToDraw ;\n      let relStartTime = this.props.selectStart - this.props.offset;\n      let startPoint = Math.floor(relStartTime / timePerPoint);\n      let relEndtTime = this.props.selectEnd - this.props.offset;\n      let endPoint = Math.floor(relEndtTime / timePerPoint);\n\n      if (endPoint > 0 && startPoint < pointsToDraw) {\n        if (startPoint > 0) {\n          draw(0, startPoint, this.props.color, this.props.background);\n        }\n\n        draw(Math.max(0, startPoint), Math.min(pointsToDraw, endPoint),\n          this.props.selectColor, this.props.selectBackground);\n\n        if (endPoint < pointsToDraw) {\n          draw(endPoint, pointsToDraw, this.props.color, this.props.background);\n        }\n      } else {\n        draw(0, pointsToDraw, this.props.color, this.props.background);\n      }\n\n    } else {\n      draw(0, pointsToDraw, this.props.color, this.props.background);\n    }\n\n    return this;\n\n  }\n\n}\n\nexport default Waveform;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Waveform.js","/**\n * @Author: Rikard Lindstrom <hi@rikard.io>\n * @Filename: Ruler.js\n */\n\nimport CanvasUI from './CanvasUI';\n\nconst defaultProperties = {\n  vZoom: 1,\n  offset: 0,\n  background: '#AAA',\n  color: '#222',\n  interval: 'auto',\n  unit: 's',\n  duration: 'auto',\n  quantize: 0,\n  height: 40\n};\n\nclass Ruler extends CanvasUI {\n\n  constructor(props) {\n\n    super(defaultProperties, props);\n\n  }\n\n  render() {\n\n    let ctx = this.ctx;\n\n    let w = this.props.width;\n    let h = this.props.height;\n\n    ctx.fillStyle = this.props.background;\n    ctx.fillRect(0, 0, w, h);\n    ctx.strokeStyle = ctx.fillStyle = this.props.color;\n    ctx.lineWidth = 0.5;\n\n    let displayDuration = this.displayDuration;\n    let secondsPerPixel = displayDuration / w;\n\n    let interval = this.props.interval;\n\n    if (interval === 'auto') {\n      interval = this.quantizeRuler(displayDuration);\n    }\n\n    interval = Math.max(0.001, interval);\n\n    let precision = Math.max(2, Math.min(3, Math.round(1 / interval)));\n    let pixelsPerInterval = (1 / secondsPerPixel) * interval;\n    let drawPoints = w / pixelsPerInterval;\n\n    let markerInterval = 5;// Math.max(1, Math.round(interval * 4));\n\n    let x = -((this.props.offset / interval) % markerInterval) *\n      pixelsPerInterval;\n\n    let startTime = this.props.offset;\n\n    for (let i = 0; i < drawPoints + markerInterval; i++) {\n      let isMarker = i % markerInterval === 0;\n\n      ctx.beginPath();\n      if (isMarker) {\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, h);\n      } else {\n        ctx.moveTo(x, h);\n        ctx.lineTo(x, h * 0.63);\n      }\n      ctx.stroke();\n\n      if (isMarker) {\n        let fontSize = this.props.width / 71;\n\n        ctx.font = `${fontSize}px Arial`;\n        ctx.fillText((startTime + (x / pixelsPerInterval) *\n          interval).toFixed(precision) + this.props.unit, x + 5, fontSize);\n      }\n\n      x += pixelsPerInterval;\n\n    }\n\n    return this;\n\n  }\n\n  quantizeRuler(d) {\n    const MAX_PIXEL_W = 20;\n    const MIN_PIXEL_W = 60;\n\n    let pixelsPerSecond = this.props.width / d;\n    let r = 5 / pixelsPerSecond;\n    let oct = -Math.floor(Math.log(r) / Math.log(10) + 1);\n    let dec = (Math.pow(10, oct));\n\n    let q;\n\n    if (!this.props.quantize) {\n      let c = [1, 2, 5][Math.round(r * dec * 2)];\n\n      q = c / dec;\n\n    } else {\n      q = this.props.quantize;\n      while (q * pixelsPerSecond < MAX_PIXEL_W) q += this.props.quantize;\n      while (q * pixelsPerSecond > MIN_PIXEL_W) q /= 5;\n\n    }\n    return q;\n  }\n\n}\n\nexport default Ruler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Ruler.js","/**\n * @Author: Rikard Lindstrom <hi@rikard.io>\n * @Filename: LineMarker.js\n */\n\nimport CanvasUI from './CanvasUI';\n\nconst defaultProperties = {\n  background: '#999',\n  color: '#222',\n  width: 10,\n  dir: 1\n};\n\nclass LineMarker extends CanvasUI {\n\n  constructor(props) {\n\n    super(defaultProperties, props);\n\n  }\n\n  render() {\n\n    let ctx = this.ctx;\n\n    // full clear and width / height set\n    let w = this.props.width;\n    let h = this.props.height;\n\n    ctx.fillStyle = this.props.background;\n    ctx.strokeStyle = this.props.color;\n\n    ctx.beginPath();\n\n    let triH = h / 64;\n    let triH2 = triH * 2;\n\n    if (this.props.dir === 1) {\n      ctx.lineTo(w, triH);\n      ctx.lineTo(0, triH2);\n      ctx.lineTo(0, 0);\n      ctx.lineTo(w, triH);\n      ctx.fill();\n      ctx.stroke();\n      ctx.strokeRect(0, 0, 1, h);\n    } else {\n      ctx.moveTo(w, 0);\n      ctx.lineTo(0, triH);\n      ctx.lineTo(w, triH2);\n      ctx.lineTo(w, 0);\n      ctx.lineTo(0, triH);\n      ctx.fill();\n      ctx.stroke();\n      ctx.strokeRect(w, 0, 1, h);\n    }\n\n    return this;\n  }\n\n}\n\nexport default LineMarker;\n\n\n\n// WEBPACK FOOTER //\n// ./src/LineMarker.js","/**\n * @Author: Rikard Lindstrom <hi@rikard.io>\n * @Filename: LoopMarker.js\n */\n\nimport CanvasUI from './CanvasUI';\n\nconst defaultProperties = {\n  height: 10,\n  color: '#222'\n};\n\nclass LoopMarker extends CanvasUI {\n\n  constructor(props) {\n\n    super(defaultProperties, props);\n\n  }\n\n  render() {\n    let ctx = this.ctx;\n\n    // full clear and width / height set\n    let w = this.props.width;\n    let h = this.props.height;\n\n    ctx.fillStyle = this.props.color;\n    ctx.fillRect(0, 0, w, h);\n\n    return this;\n  }\n\n}\n\nexport default LoopMarker;\n\n\n\n// WEBPACK FOOTER //\n// ./src/LoopMarker.js"],"sourceRoot":""}